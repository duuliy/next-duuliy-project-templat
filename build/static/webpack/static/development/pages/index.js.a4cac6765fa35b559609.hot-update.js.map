{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.a4cac6765fa35b559609.hot-update.js","sources":["webpack:///./models/home.js","webpack:///./models/index.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-descriptor.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-symbols.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread.js","webpack:///./pages/index.jsx","webpack:///./utils/store.js"],"sourcesContent":["export default {\r\n    namespace: 'Home',\r\n    state: {\r\n      admittanceBody: {}\r\n  \r\n    },\r\n    effects: {\r\n      * getAdmittanceList ({ payload }, { call, put }) {\r\n        const data = yield call(asset.getAdmittanceList, payload)\r\n        yield put({ type: 'save', payload: { admittanceBody: data } })\r\n      }\r\n    },\r\n    reducers: {\r\n      save (state, action) {\r\n        return { ...state, ...action.payload }\r\n      }\r\n    }\r\n  }\r\n      ","\r\nimport home from './home';\r\n\r\nconst model = [\r\n  home,\r\n];\r\n\r\nexport default model;","module.exports = require(\"core-js/library/fn/object/get-own-property-descriptor\");","module.exports = require(\"core-js/library/fn/object/get-own-property-symbols\");","import _Object$getOwnPropertyDescriptor from \"../../core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"../../core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"../../core-js/object/keys\";\nimport defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    var ownKeys = _Object$keys(source);\n\n    if (typeof _Object$getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(_Object$getOwnPropertySymbols(source).filter(function (sym) {\n        return _Object$getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import React, { PureComponent, Fragment } from 'react';\r\nimport dynamic from 'next/dynamic'\r\nimport { Button } from 'antd';\r\n\r\n\r\n// import UserList from \"./UserList\";\r\n// import Head from \"../components/common/HeadView/index\";\r\nimport config from \"../config/config\";\r\nimport Link from 'next/link'\r\nimport Router from 'next/router'\r\nimport dva from 'dva';\r\nimport {\r\n  SignOutAsync\r\n} from '../services/api';\r\nimport WithDva from '../utils/store';\r\n\r\nconst UserList = dynamic(import('./UserList'),{\r\n  ssr:false //禁止使用ssr\r\n})  //懒加载\r\n\r\nconst app = dva();\r\nclass Home extends PureComponent {\r\n\r\n  //类似nuxt的asyncData，以及原理都是一样\r\n  //注意：getInitialProps将不能使用在子组件中。只能使用在pages页面中。\r\n  //参数如下：\r\n  //pathname - URL 的 path 部分\r\n  //query - URL 的 query 部分，并被解析成对象\r\n  //asPath - 显示在浏览器中的实际路径（包含查询部分），为String类型\r\n  //req - HTTP 请求对象 (只有服务器端有)\r\n  //res - HTTP 返回对象 (只有服务器端有)\r\n  //jsonPageRes - 获取数据响应对象 (只有客户端有)\r\n  //err - 渲染过程中的任何错误\r\n\r\n  static async getInitialProps({ req }) {\r\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\r\n    return { userAgent }\r\n  }\r\n\r\n  routGo=(linkA)=>(linkB)=>(linkC)=>{\r\n    Router.push(\r\n      {\r\n        pathname: linkA+linkB+linkC,\r\n        query: { name: 'Zeit' },\r\n         shallow: true  //  这样不会执行 getInitialProps\r\n      })\r\n\r\n      //Router.prefetch('/about')\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className='app'>\r\n         {/* <Head/> */}\r\n        <h1>首页</h1>\r\n        <Button type='primary'>Hello world!</Button>\r\n         {this.props.userAgent} <br/>\r\n        <img style={{ width: 50 }} src={config.logoPath} alt=\"\"/>\r\n        <UserList />\r\n        <Link href={{ pathname: '/UserList', query: { name: 'Zeit' }}} prefetch> \r\n          {/* prefetch 后台预加载页面，达到最佳性能 (生产环境才行)\r\n            passHref 强制使 link和onclick都生效但是影响seo link里面加<a>就都可以\r\n          */}\r\n          <p style={{ color: 'blue',cursor:'pointer' }}>UserList</p>\r\n        </Link>\r\n        <button onClick={()=>{this.routGo('/')('organi')('zation')}}>去组织机构</button>\r\n        <style jsx>{`\r\n          h1 {\r\n            color: red;\r\n          }\r\n        `}</style>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  async componentDidMount(){\r\n    const res = await SignOutAsync()\r\n    console.log(res)\r\n  }\r\n};\r\n\r\nexport default WithDva((state) => {\r\n  return {\r\n    data: state.admittanceBody\r\n  };\r\n})(Home);","import React from 'react';\r\nimport dva, { connect } from 'dva';\r\nimport { Provider } from 'react-redux';\r\nimport model from '../models/index';\r\n// 参考：https://github.com/zeit/next.js/commit/0697c289f8ab84ca3fc753106a4dfba681cd47a8#diff-5c1e7376baf47b623a7f1f0533af8352\r\n\r\nconst checkServer = () => Object.prototype.toString.call(global.process) === '[object process]';\r\n\r\n// eslint-disable-next-line\r\nconst __NEXT_DVA_STORE__ =  '__NEXT_DVA_STORE__'\r\n\r\nfunction createDvaStore(initialState) {\r\n  let app;\r\n  if (initialState) {\r\n    app = dva({\r\n      initialState,\r\n    });\r\n  } else {\r\n    app = dva({});\r\n  }\r\n  const isArray = Array.isArray(model);\r\n  if (isArray) {\r\n    model.forEach((m) => {\r\n      app.model(m);\r\n    });\r\n  } else {\r\n    app.model(model);\r\n  }\r\n  app.router(() => {});\r\n  app.start();\r\n  // console.log(app);\r\n  // eslint-disable-next-line\r\n  const store = app._store\r\n  return store;\r\n}\r\n\r\nfunction getOrCreateStore(initialState) {\r\n  // console.log(initialState);\r\n  const isServer = checkServer();\r\n  if (isServer) { // run in server\r\n    // console.log('server');\r\n    return createDvaStore(initialState);\r\n  }\r\n  // eslint-disable-next-line\r\n  if (!window[__NEXT_DVA_STORE__]) {\r\n    // console.log('client');\r\n    // eslint-disable-next-line\r\n    window[__NEXT_DVA_STORE__] = createDvaStore(initialState);\r\n  }\r\n  // eslint-disable-next-line\r\n  return window[__NEXT_DVA_STORE__];\r\n}\r\n\r\nexport default function withDva(...args) {\r\n  return function CreateNextPage(Component) {\r\n    const ComponentWithDva = (props = {}) => {\r\n      const { store, initialProps, initialState } = props;\r\n      const ConnectedComponent = connect(...args)(Component);\r\n      return React.createElement(\r\n        Provider,\r\n        // in client side, it will init store with the initial state tranfer from server side\r\n        { store: store && store.dispatch ? store : getOrCreateStore(initialState) },\r\n        // transfer next.js's props to the page\r\n        React.createElement(ConnectedComponent, initialProps),\r\n      );\r\n    };\r\n    ComponentWithDva.getInitialProps = async (props = {}) => {\r\n      // console.log('get......');\r\n      const isServer = checkServer();\r\n      const store = getOrCreateStore();\r\n      // console.log(store);\r\n      // call children's getInitialProps\r\n      // get initProps and transfer in to the page\r\n      const initialProps = Component.getInitialProps\r\n        ? await Component.getInitialProps({ ...props, isServer, store })\r\n        : {};\r\n      return {\r\n        store,\r\n        initialProps,\r\n        initialState: store.getState(),\r\n      };\r\n    };\r\n    return ComponentWithDva;\r\n  };\r\n}"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AADA;AAIA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AADA;AAEA;AACA;AAHA;AAEA;AAFA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAHA;AAZA;;;;;;;;;;;;ACCA;AAAA;AAAA;AAEA;AAIA;;;;;;;;;;;ACPA;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;;;;;;;;;;;;;;;;;;AAkBA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAJA;AAOA;AATA;AAAA;AACA;;;;;;AAUA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAAA;AAAA;AAqBA;;;;;;;;;;;;;AAGA;AACA;;AADA;AACA;AACA;;;;;;;;;;;;;;;;;AAvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAhBA;AACA;AAyDA;AAEA;AACA;AACA;AADA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAGA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAQA;AAAA;AAAA;AACA;AATA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAOA;AAPA;AAWA;AACA;AACA;AAHA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AACA;;;;;A","sourceRoot":""}