{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.eb2b553c469989d698eb.hot-update.js","sources":["webpack:///./pages/index.jsx"],"sourcesContent":["import React, { PureComponent, Fragment } from 'react';\r\nimport dynamic from 'next/dynamic'\r\nimport { Button } from 'antd';\r\n\r\n\r\n// import UserList from \"./UserList\";\r\n// import Head from \"../components/common/HeadView/index\";\r\nimport config from \"../config/config\";\r\nimport Link from 'next/link'\r\nimport Router from 'next/router'\r\nimport dva from 'dva';\r\nimport {\r\n  SignOutAsync\r\n} from '../services/api';\r\nimport WithDva from '../utils/store';\r\n\r\nconst UserList = dynamic(import('./UserList'),{\r\n  ssr:false //禁止使用ssr\r\n})  //懒加载\r\n\r\nconst app = dva();\r\nclass Home extends PureComponent {\r\n\r\n  //类似nuxt的asyncData，以及原理都是一样\r\n  //注意：getInitialProps将不能使用在子组件中。只能使用在pages页面中。\r\n  //参数如下：\r\n  //pathname - URL 的 path 部分\r\n  //query - URL 的 query 部分，并被解析成对象\r\n  //asPath - 显示在浏览器中的实际路径（包含查询部分），为String类型\r\n  //req - HTTP 请求对象 (只有服务器端有)\r\n  //res - HTTP 返回对象 (只有服务器端有)\r\n  //jsonPageRes - 获取数据响应对象 (只有客户端有)\r\n  //err - 渲染过程中的任何错误\r\n\r\n  static async getInitialProps({ req }) {\r\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\r\n    return { userAgent }\r\n  }\r\n\r\n  routGo=(linkA)=>(linkB)=>(linkC)=>{\r\n    Router.push(\r\n      {\r\n        pathname: linkA+linkB+linkC,\r\n        query: { name: 'Zeit' },\r\n         shallow: true  //  这样不会执行 getInitialProps\r\n      })\r\n\r\n      //Router.prefetch('/about')\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className='app'>\r\n         {/* <Head/> */}\r\n        <h1>首页</h1>\r\n        <Button type='primary'>Hello world!</Button>\r\n         {this.props.userAgent} <br/>\r\n        <img style={{ width: 50 }} src={config.logoPath} alt=\"\"/>\r\n        <UserList />\r\n        <Link href={{ pathname: '/UserList', query: { name: 'Zeit' }}} prefetch> \r\n          {/* prefetch 后台预加载页面，达到最佳性能 (生产环境才行)\r\n            passHref 强制使 link和onclick都生效但是影响seo link里面加<a>就都可以\r\n          */}\r\n          <p style={{ color: 'blue',cursor:'pointer' }}>UserList</p>\r\n        </Link>\r\n        <button onClick={()=>{this.routGo('/')('organi')('zation')}}>去组织机构</button>\r\n        <style jsx>{`\r\n          h1 {\r\n            color: red;\r\n          }\r\n        `}</style>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  async componentDidMount(){\r\n    // const res = await SignOutAsync()\r\n    // await this.props.dispatch({ type: 'Home/QUERY' })\r\n    await this.props.dispatch({type: 'Home/QUERY'});\r\n    setTimeout(()=>{\r\n      console.log(this.props.data)\r\n    },500)\r\n    // setTimeout(()=>{\r\n    //   console.log(this.props.data)\r\n    // },500)\r\n    // console.log(res)\r\n  }\r\n};\r\n\r\nexport default WithDva((state) => {\r\n  return {\r\n    data: state.admittanceBody\r\n  };\r\n})(Home);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;;;;;;;;;;;;;;;;;;AAkBA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAJA;AAOA;AATA;AAAA;AACA;;;;;;AAUA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAAA;AAAA;AAqBA;;;;;;;;;;;;;;AAKA;AAAA;AAAA;AACA;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AA/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAhBA;AACA;AAiEA;AAEA;AACA;AACA;AADA;AAGA;;;;A","sourceRoot":""}